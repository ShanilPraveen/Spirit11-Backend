generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model User {
  id          String   @id @default(uuid())
  username    String   @unique
  password    String   @unique
  role        String
  team        Team?
  money       Int      @default(2000000)
  refreshTokens RefreshToken[]
}

model Team {
  id         String   @id @default(uuid())
  userId     String   @unique
  user       User     @relation(fields: [userId], references: [id])
  players    TeamPlayer[]
  createdAt  DateTime @default(now())
}

model Player {
  id             String       @id @default(uuid())
  name           String
  university     String
  position       String       // e.g., "Batsman", "All-Rounder"
  value          Int          // fantasy value (credits)
  runs           Int
  ballsFaced     Int
  inningsPlayed  Int
  wickets        Int
  oversBowled    Float
  runsConceded   Int
  teamPlayers    TeamPlayer[]
}

model TeamPlayer {
  id        String   @id @default(uuid())
  teamId    String
  playerId  String
  team      Team     @relation(fields: [teamId], references: [id])
  player    Player   @relation(fields: [playerId], references: [id])
  addedAt   DateTime @default(now())

  @@unique([teamId, playerId]) 
}

model RefreshToken {
  id        String   @id @default(uuid())
  token     String   @unique
  userId    String
  user      User     @relation(fields: [userId], references: [id])
  createdAt DateTime @default(now())
}
